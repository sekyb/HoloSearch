<!DOCTYPE html>
<html>
<head>
    <title>Pokémon Regex Search</title>
</head>
<body>
    <h1>Pokémon Regex Search</h1>
    <form action="/search" method="post" id="searchForm">
        <label for="regex">Enter Regex:</label>
        <input type="text" id="regex" name="regex" required>
        <button type="submit">Search</button>
    </form>
    <div id="results"></div>
    <script>
        const form = document.getElementById('searchForm');
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(form);
            const regex = formData.get('regex');
            const response = await fetch('/search', {
                method: 'POST',
                headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
                body: new URLSearchParams({ regex })
            });
            const data = await response.json();
            const resultsDiv = document.getElementById('results');
            if (data.error) {
                resultsDiv.innerHTML = `<p style="color:red;">Error: ${data.error}</p>`;
            } else {
                resultsDiv.innerHTML = `
                    <h2>Matches:</h2>
                    <ul>
                        ${data.matches.map(pokemon => `
                            <li>
                                <img src="${pokemon.image}" alt="${pokemon.name}" style="width:50px;height:50px;">
                                <strong>Name:</strong> ${pokemon.name} <br>
                                <strong>ID:</strong> ${pokemon.id} <br>
                                <strong>Height:</strong> ${pokemon.height} <br>
                                <strong>Weight:</strong> ${pokemon.weight} <br>
                                <strong>Types:</strong> ${pokemon.types.join(', ')} <br>
                                <strong>Abilities:</strong> ${pokemon.abilities.join(', ')} <br>
                                <strong>Stats:</strong> 
                                <ul>
                                    ${Object.entries(pokemon.stats).map(([key, value]) => `
                                        <li>${key}: ${value}</li>
                                    `).join('')}
                                </ul>
                            </li>
                        `).join('')}
                    </ul>
                `;
            }
        });
    </script>
</body>
</html>
